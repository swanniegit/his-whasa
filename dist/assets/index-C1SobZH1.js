const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/BookingSystem-CLf-3pvV.js","assets/vendor-C1JoJ-56.js","assets/ui-m8UtK-mZ.js","assets/supabase-Dt6lMAzC.js","assets/ProtectedRoute-CYTpqFjj.js","assets/BasicProtectedRoute-Dfvfax-k.js"])))=>i.map(i=>d[i]);
var Jt=Object.defineProperty;var ct=t=>{throw TypeError(t)};var Yt=(t,e,r)=>e in t?Jt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var oe=(t,e,r)=>Yt(t,typeof e!="symbol"?e+"":e,r),Ke=(t,e,r)=>e.has(t)||ct("Cannot "+r);var c=(t,e,r)=>(Ke(t,e,"read from private field"),r?r.call(t):e.get(t)),A=(t,e,r)=>e.has(t)?ct("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),k=(t,e,r,a)=>(Ke(t,e,"write to private field"),a?a.call(t,r):e.set(t,r),r),T=(t,e,r)=>(Ke(t,e,"access private method"),r);var Fe=(t,e,r,a)=>({set _(n){k(t,e,n,r)},get _(){return c(t,e,a)}});import{r as p,a as Zt,b as ne}from"./vendor-C1JoJ-56.js";import{u as St,L as le,a as Xt,O as es,R as ts,b as L,N as dt,B as ss}from"./ui-m8UtK-mZ.js";import{c as rs,_ as nt}from"./supabase-Dt6lMAzC.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&a(o)}).observe(document,{childList:!0,subtree:!0});function r(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(n){if(n.ep)return;n.ep=!0;const i=r(n);fetch(n.href,i)}})();var Pt={exports:{}},Be={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var as=p,ns=Symbol.for("react.element"),is=Symbol.for("react.fragment"),os=Object.prototype.hasOwnProperty,ls=as.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,cs={key:!0,ref:!0,__self:!0,__source:!0};function Et(t,e,r){var a,n={},i=null,o=null;r!==void 0&&(i=""+r),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(a in e)os.call(e,a)&&!cs.hasOwnProperty(a)&&(n[a]=e[a]);if(t&&t.defaultProps)for(a in e=t.defaultProps,e)n[a]===void 0&&(n[a]=e[a]);return{$$typeof:ns,type:t,key:i,ref:o,props:n,_owner:ls.current}}Be.Fragment=is;Be.jsx=Et;Be.jsxs=Et;Pt.exports=Be;var s=Pt.exports,Xe={},ut=Zt;Xe.createRoot=ut.createRoot,Xe.hydrateRoot=ut.hydrateRoot;var Qe=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},We=typeof window>"u"||"Deno"in globalThis;function H(){}function ds(t,e){return typeof t=="function"?t(e):t}function us(t){return typeof t=="number"&&t>=0&&t!==1/0}function hs(t,e){return Math.max(t+(e||0)-Date.now(),0)}function et(t,e){return typeof t=="function"?t(e):t}function ms(t,e){return typeof t=="function"?t(e):t}function ht(t,e){const{type:r="all",exact:a,fetchStatus:n,predicate:i,queryKey:o,stale:l}=t;if(o){if(a){if(e.queryHash!==it(o,e.options))return!1}else if(!Ae(e.queryKey,o))return!1}if(r!=="all"){const d=e.isActive();if(r==="active"&&!d||r==="inactive"&&d)return!1}return!(typeof l=="boolean"&&e.isStale()!==l||n&&n!==e.state.fetchStatus||i&&!i(e))}function mt(t,e){const{exact:r,status:a,predicate:n,mutationKey:i}=t;if(i){if(!e.options.mutationKey)return!1;if(r){if(Ee(e.options.mutationKey)!==Ee(i))return!1}else if(!Ae(e.options.mutationKey,i))return!1}return!(a&&e.state.status!==a||n&&!n(e))}function it(t,e){return((e==null?void 0:e.queryKeyHashFn)||Ee)(t)}function Ee(t){return JSON.stringify(t,(e,r)=>tt(r)?Object.keys(r).sort().reduce((a,n)=>(a[n]=r[n],a),{}):r)}function Ae(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(r=>Ae(t[r],e[r])):!1}function At(t,e){if(t===e)return t;const r=pt(t)&&pt(e);if(r||tt(t)&&tt(e)){const a=r?t:Object.keys(t),n=a.length,i=r?e:Object.keys(e),o=i.length,l=r?[]:{},d=new Set(a);let u=0;for(let x=0;x<o;x++){const y=r?x:i[x];(!r&&d.has(y)||r)&&t[y]===void 0&&e[y]===void 0?(l[y]=void 0,u++):(l[y]=At(t[y],e[y]),l[y]===t[y]&&t[y]!==void 0&&u++)}return n===o&&u===n?t:l}return e}function pt(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function tt(t){if(!ft(t))return!1;const e=t.constructor;if(e===void 0)return!0;const r=e.prototype;return!(!ft(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function ft(t){return Object.prototype.toString.call(t)==="[object Object]"}function ps(t){return new Promise(e=>{setTimeout(e,t)})}function fs(t,e,r){return typeof r.structuralSharing=="function"?r.structuralSharing(t,e):r.structuralSharing!==!1?At(t,e):e}function xs(t,e,r=0){const a=[...t,e];return r&&a.length>r?a.slice(1):a}function gs(t,e,r=0){const a=[e,...t];return r&&a.length>r?a.slice(0,-1):a}var ot=Symbol();function Mt(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===ot?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var de,ee,ye,bt,ys=(bt=class extends Qe{constructor(){super();A(this,de);A(this,ee);A(this,ye);k(this,ye,e=>{if(!We&&window.addEventListener){const r=()=>e();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){c(this,ee)||this.setEventListener(c(this,ye))}onUnsubscribe(){var e;this.hasListeners()||((e=c(this,ee))==null||e.call(this),k(this,ee,void 0))}setEventListener(e){var r;k(this,ye,e),(r=c(this,ee))==null||r.call(this),k(this,ee,e(a=>{typeof a=="boolean"?this.setFocused(a):this.onFocus()}))}setFocused(e){c(this,de)!==e&&(k(this,de,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(r=>{r(e)})}isFocused(){var e;return typeof c(this,de)=="boolean"?c(this,de):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},de=new WeakMap,ee=new WeakMap,ye=new WeakMap,bt),Ot=new ys,be,te,ve,vt,bs=(vt=class extends Qe{constructor(){super();A(this,be,!0);A(this,te);A(this,ve);k(this,ve,e=>{if(!We&&window.addEventListener){const r=()=>e(!0),a=()=>e(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",a,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",a)}}})}onSubscribe(){c(this,te)||this.setEventListener(c(this,ve))}onUnsubscribe(){var e;this.hasListeners()||((e=c(this,te))==null||e.call(this),k(this,te,void 0))}setEventListener(e){var r;k(this,ve,e),(r=c(this,te))==null||r.call(this),k(this,te,e(this.setOnline.bind(this)))}setOnline(e){c(this,be)!==e&&(k(this,be,e),this.listeners.forEach(a=>{a(e)}))}isOnline(){return c(this,be)}},be=new WeakMap,te=new WeakMap,ve=new WeakMap,vt),He=new bs;function vs(){let t,e;const r=new Promise((n,i)=>{t=n,e=i});r.status="pending",r.catch(()=>{});function a(n){Object.assign(r,n),delete r.resolve,delete r.reject}return r.resolve=n=>{a({status:"fulfilled",value:n}),t(n)},r.reject=n=>{a({status:"rejected",reason:n}),e(n)},r}function js(t){return Math.min(1e3*2**t,3e4)}function Rt(t){return(t??"online")==="online"?He.isOnline():!0}var Tt=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function Ge(t){return t instanceof Tt}function Lt(t){let e=!1,r=0,a=!1,n;const i=vs(),o=j=>{var m;a||(f(new Tt(j)),(m=t.abort)==null||m.call(t))},l=()=>{e=!0},d=()=>{e=!1},u=()=>Ot.isFocused()&&(t.networkMode==="always"||He.isOnline())&&t.canRun(),x=()=>Rt(t.networkMode)&&t.canRun(),y=j=>{var m;a||(a=!0,(m=t.onSuccess)==null||m.call(t,j),n==null||n(),i.resolve(j))},f=j=>{var m;a||(a=!0,(m=t.onError)==null||m.call(t,j),n==null||n(),i.reject(j))},h=()=>new Promise(j=>{var m;n=_=>{(a||u())&&j(_)},(m=t.onPause)==null||m.call(t)}).then(()=>{var j;n=void 0,a||(j=t.onContinue)==null||j.call(t)}),b=()=>{if(a)return;let j;const m=r===0?t.initialPromise:void 0;try{j=m??t.fn()}catch(_){j=Promise.reject(_)}Promise.resolve(j).then(y).catch(_=>{var g;if(a)return;const v=t.retry??(We?0:3),N=t.retryDelay??js,C=typeof N=="function"?N(r,_):N,P=v===!0||typeof v=="number"&&r<v||typeof v=="function"&&v(r,_);if(e||!P){f(_);return}r++,(g=t.onFail)==null||g.call(t,r,_),ps(C).then(()=>u()?void 0:h()).then(()=>{e?f(_):b()})})};return{promise:i,cancel:o,continue:()=>(n==null||n(),i),cancelRetry:l,continueRetry:d,canStart:x,start:()=>(x()?b():h().then(b),i)}}var ws=t=>setTimeout(t,0);function Ns(){let t=[],e=0,r=l=>{l()},a=l=>{l()},n=ws;const i=l=>{e?t.push(l):n(()=>{r(l)})},o=()=>{const l=t;t=[],l.length&&n(()=>{a(()=>{l.forEach(d=>{r(d)})})})};return{batch:l=>{let d;e++;try{d=l()}finally{e--,e||o()}return d},batchCalls:l=>(...d)=>{i(()=>{l(...d)})},schedule:i,setNotifyFunction:l=>{r=l},setBatchNotifyFunction:l=>{a=l},setScheduler:l=>{n=l}}}var q=Ns(),ue,jt,Ft=(jt=class{constructor(){A(this,ue)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),us(this.gcTime)&&k(this,ue,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(We?1/0:5*60*1e3))}clearGcTimeout(){c(this,ue)&&(clearTimeout(c(this,ue)),k(this,ue,void 0))}},ue=new WeakMap,jt),je,he,$,me,F,Oe,pe,z,G,wt,Cs=(wt=class extends Ft{constructor(e){super();A(this,z);A(this,je);A(this,he);A(this,$);A(this,me);A(this,F);A(this,Oe);A(this,pe);k(this,pe,!1),k(this,Oe,e.defaultOptions),this.setOptions(e.options),this.observers=[],k(this,me,e.client),k(this,$,c(this,me).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,k(this,je,_s(this.options)),this.state=e.state??c(this,je),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=c(this,F))==null?void 0:e.promise}setOptions(e){this.options={...c(this,Oe),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&c(this,$).remove(this)}setData(e,r){const a=fs(this.state.data,e,this.options);return T(this,z,G).call(this,{data:a,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),a}setState(e,r){T(this,z,G).call(this,{type:"setState",state:e,setStateOptions:r})}cancel(e){var a,n;const r=(a=c(this,F))==null?void 0:a.promise;return(n=c(this,F))==null||n.cancel(e),r?r.then(H).catch(H):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(c(this,je))}isActive(){return this.observers.some(e=>ms(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===ot||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>et(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!hs(this.state.dataUpdatedAt,e)}onFocus(){var r;const e=this.observers.find(a=>a.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(r=c(this,F))==null||r.continue()}onOnline(){var r;const e=this.observers.find(a=>a.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(r=c(this,F))==null||r.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),c(this,$).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(r=>r!==e),this.observers.length||(c(this,F)&&(c(this,pe)?c(this,F).cancel({revert:!0}):c(this,F).cancelRetry()),this.scheduleGc()),c(this,$).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||T(this,z,G).call(this,{type:"invalidate"})}fetch(e,r){var u,x,y;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(c(this,F))return c(this,F).continueRetry(),c(this,F).promise}if(e&&this.setOptions(e),!this.options.queryFn){const f=this.observers.find(h=>h.options.queryFn);f&&this.setOptions(f.options)}const a=new AbortController,n=f=>{Object.defineProperty(f,"signal",{enumerable:!0,get:()=>(k(this,pe,!0),a.signal)})},i=()=>{const f=Mt(this.options,r),b=(()=>{const j={client:c(this,me),queryKey:this.queryKey,meta:this.meta};return n(j),j})();return k(this,pe,!1),this.options.persister?this.options.persister(f,b,this):f(b)},l=(()=>{const f={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:c(this,me),state:this.state,fetchFn:i};return n(f),f})();(u=this.options.behavior)==null||u.onFetch(l,this),k(this,he,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((x=l.fetchOptions)==null?void 0:x.meta))&&T(this,z,G).call(this,{type:"fetch",meta:(y=l.fetchOptions)==null?void 0:y.meta});const d=f=>{var h,b,j,m;Ge(f)&&f.silent||T(this,z,G).call(this,{type:"error",error:f}),Ge(f)||((b=(h=c(this,$).config).onError)==null||b.call(h,f,this),(m=(j=c(this,$).config).onSettled)==null||m.call(j,this.state.data,f,this)),this.scheduleGc()};return k(this,F,Lt({initialPromise:r==null?void 0:r.initialPromise,fn:l.fetchFn,abort:a.abort.bind(a),onSuccess:f=>{var h,b,j,m;if(f===void 0){d(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(f)}catch(_){d(_);return}(b=(h=c(this,$).config).onSuccess)==null||b.call(h,f,this),(m=(j=c(this,$).config).onSettled)==null||m.call(j,f,this.state.error,this),this.scheduleGc()},onError:d,onFail:(f,h)=>{T(this,z,G).call(this,{type:"failed",failureCount:f,error:h})},onPause:()=>{T(this,z,G).call(this,{type:"pause"})},onContinue:()=>{T(this,z,G).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0})),c(this,F).start()}},je=new WeakMap,he=new WeakMap,$=new WeakMap,me=new WeakMap,F=new WeakMap,Oe=new WeakMap,pe=new WeakMap,z=new WeakSet,G=function(e){const r=a=>{switch(e.type){case"failed":return{...a,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...a,fetchStatus:"paused"};case"continue":return{...a,fetchStatus:"fetching"};case"fetch":return{...a,...ks(a.data,this.options),fetchMeta:e.meta??null};case"success":return k(this,he,void 0),{...a,data:e.data,dataUpdateCount:a.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const n=e.error;return Ge(n)&&n.revert&&c(this,he)?{...c(this,he),fetchStatus:"idle"}:{...a,error:n,errorUpdateCount:a.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:a.fetchFailureCount+1,fetchFailureReason:n,fetchStatus:"idle",status:"error"};case"invalidate":return{...a,isInvalidated:!0};case"setState":return{...a,...e.state}}};this.state=r(this.state),q.batch(()=>{this.observers.forEach(a=>{a.onQueryUpdate()}),c(this,$).notify({query:this,type:"updated",action:e})})},wt);function ks(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Rt(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function _s(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,r=e!==void 0,a=r?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:r?a??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var Q,Nt,Ss=(Nt=class extends Qe{constructor(e={}){super();A(this,Q);this.config=e,k(this,Q,new Map)}build(e,r,a){const n=r.queryKey,i=r.queryHash??it(n,r);let o=this.get(i);return o||(o=new Cs({client:e,queryKey:n,queryHash:i,options:e.defaultQueryOptions(r),state:a,defaultOptions:e.getQueryDefaults(n)}),this.add(o)),o}add(e){c(this,Q).has(e.queryHash)||(c(this,Q).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const r=c(this,Q).get(e.queryHash);r&&(e.destroy(),r===e&&c(this,Q).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){q.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return c(this,Q).get(e)}getAll(){return[...c(this,Q).values()]}find(e){const r={exact:!0,...e};return this.getAll().find(a=>ht(r,a))}findAll(e={}){const r=this.getAll();return Object.keys(e).length>0?r.filter(a=>ht(e,a)):r}notify(e){q.batch(()=>{this.listeners.forEach(r=>{r(e)})})}onFocus(){q.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){q.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Q=new WeakMap,Nt),W,D,fe,V,Z,Ct,Ps=(Ct=class extends Ft{constructor(e){super();A(this,V);A(this,W);A(this,D);A(this,fe);this.mutationId=e.mutationId,k(this,D,e.mutationCache),k(this,W,[]),this.state=e.state||Es(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){c(this,W).includes(e)||(c(this,W).push(e),this.clearGcTimeout(),c(this,D).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){k(this,W,c(this,W).filter(r=>r!==e)),this.scheduleGc(),c(this,D).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){c(this,W).length||(this.state.status==="pending"?this.scheduleGc():c(this,D).remove(this))}continue(){var e;return((e=c(this,fe))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var i,o,l,d,u,x,y,f,h,b,j,m,_,v,N,C,P,g,w,R;const r=()=>{T(this,V,Z).call(this,{type:"continue"})};k(this,fe,Lt({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(S,U)=>{T(this,V,Z).call(this,{type:"failed",failureCount:S,error:U})},onPause:()=>{T(this,V,Z).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>c(this,D).canRun(this)}));const a=this.state.status==="pending",n=!c(this,fe).canStart();try{if(a)r();else{T(this,V,Z).call(this,{type:"pending",variables:e,isPaused:n}),await((o=(i=c(this,D).config).onMutate)==null?void 0:o.call(i,e,this));const U=await((d=(l=this.options).onMutate)==null?void 0:d.call(l,e));U!==this.state.context&&T(this,V,Z).call(this,{type:"pending",context:U,variables:e,isPaused:n})}const S=await c(this,fe).start();return await((x=(u=c(this,D).config).onSuccess)==null?void 0:x.call(u,S,e,this.state.context,this)),await((f=(y=this.options).onSuccess)==null?void 0:f.call(y,S,e,this.state.context)),await((b=(h=c(this,D).config).onSettled)==null?void 0:b.call(h,S,null,this.state.variables,this.state.context,this)),await((m=(j=this.options).onSettled)==null?void 0:m.call(j,S,null,e,this.state.context)),T(this,V,Z).call(this,{type:"success",data:S}),S}catch(S){try{throw await((v=(_=c(this,D).config).onError)==null?void 0:v.call(_,S,e,this.state.context,this)),await((C=(N=this.options).onError)==null?void 0:C.call(N,S,e,this.state.context)),await((g=(P=c(this,D).config).onSettled)==null?void 0:g.call(P,void 0,S,this.state.variables,this.state.context,this)),await((R=(w=this.options).onSettled)==null?void 0:R.call(w,void 0,S,e,this.state.context)),S}finally{T(this,V,Z).call(this,{type:"error",error:S})}}finally{c(this,D).runNext(this)}}},W=new WeakMap,D=new WeakMap,fe=new WeakMap,V=new WeakSet,Z=function(e){const r=a=>{switch(e.type){case"failed":return{...a,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...a,isPaused:!0};case"continue":return{...a,isPaused:!1};case"pending":return{...a,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...a,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...a,data:void 0,error:e.error,failureCount:a.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=r(this.state),q.batch(()=>{c(this,W).forEach(a=>{a.onMutationUpdate(e)}),c(this,D).notify({mutation:this,type:"updated",action:e})})},Ct);function Es(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var J,B,Re,kt,As=(kt=class extends Qe{constructor(e={}){super();A(this,J);A(this,B);A(this,Re);this.config=e,k(this,J,new Set),k(this,B,new Map),k(this,Re,0)}build(e,r,a){const n=new Ps({mutationCache:this,mutationId:++Fe(this,Re)._,options:e.defaultMutationOptions(r),state:a});return this.add(n),n}add(e){c(this,J).add(e);const r=De(e);if(typeof r=="string"){const a=c(this,B).get(r);a?a.push(e):c(this,B).set(r,[e])}this.notify({type:"added",mutation:e})}remove(e){if(c(this,J).delete(e)){const r=De(e);if(typeof r=="string"){const a=c(this,B).get(r);if(a)if(a.length>1){const n=a.indexOf(e);n!==-1&&a.splice(n,1)}else a[0]===e&&c(this,B).delete(r)}}this.notify({type:"removed",mutation:e})}canRun(e){const r=De(e);if(typeof r=="string"){const a=c(this,B).get(r),n=a==null?void 0:a.find(i=>i.state.status==="pending");return!n||n===e}else return!0}runNext(e){var a;const r=De(e);if(typeof r=="string"){const n=(a=c(this,B).get(r))==null?void 0:a.find(i=>i!==e&&i.state.isPaused);return(n==null?void 0:n.continue())??Promise.resolve()}else return Promise.resolve()}clear(){q.batch(()=>{c(this,J).forEach(e=>{this.notify({type:"removed",mutation:e})}),c(this,J).clear(),c(this,B).clear()})}getAll(){return Array.from(c(this,J))}find(e){const r={exact:!0,...e};return this.getAll().find(a=>mt(r,a))}findAll(e={}){return this.getAll().filter(r=>mt(e,r))}notify(e){q.batch(()=>{this.listeners.forEach(r=>{r(e)})})}resumePausedMutations(){const e=this.getAll().filter(r=>r.state.isPaused);return q.batch(()=>Promise.all(e.map(r=>r.continue().catch(H))))}},J=new WeakMap,B=new WeakMap,Re=new WeakMap,kt);function De(t){var e;return(e=t.options.scope)==null?void 0:e.id}function xt(t){return{onFetch:(e,r)=>{var x,y,f,h,b;const a=e.options,n=(f=(y=(x=e.fetchOptions)==null?void 0:x.meta)==null?void 0:y.fetchMore)==null?void 0:f.direction,i=((h=e.state.data)==null?void 0:h.pages)||[],o=((b=e.state.data)==null?void 0:b.pageParams)||[];let l={pages:[],pageParams:[]},d=0;const u=async()=>{let j=!1;const m=N=>{Object.defineProperty(N,"signal",{enumerable:!0,get:()=>(e.signal.aborted?j=!0:e.signal.addEventListener("abort",()=>{j=!0}),e.signal)})},_=Mt(e.options,e.fetchOptions),v=async(N,C,P)=>{if(j)return Promise.reject();if(C==null&&N.pages.length)return Promise.resolve(N);const w=(()=>{const Le={client:e.client,queryKey:e.queryKey,pageParam:C,direction:P?"backward":"forward",meta:e.options.meta};return m(Le),Le})(),R=await _(w),{maxPages:S}=e.options,U=P?gs:xs;return{pages:U(N.pages,R,S),pageParams:U(N.pageParams,C,S)}};if(n&&i.length){const N=n==="backward",C=N?Ms:gt,P={pages:i,pageParams:o},g=C(a,P);l=await v(P,g,N)}else{const N=t??i.length;do{const C=d===0?o[0]??a.initialPageParam:gt(a,l);if(d>0&&C==null)break;l=await v(l,C),d++}while(d<N)}return l};e.options.persister?e.fetchFn=()=>{var j,m;return(m=(j=e.options).persister)==null?void 0:m.call(j,u,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},r)}:e.fetchFn=u}}}function gt(t,{pages:e,pageParams:r}){const a=e.length-1;return e.length>0?t.getNextPageParam(e[a],e,r[a],r):void 0}function Ms(t,{pages:e,pageParams:r}){var a;return e.length>0?(a=t.getPreviousPageParam)==null?void 0:a.call(t,e[0],e,r[0],r):void 0}var M,se,re,we,Ne,ae,Ce,ke,_t,Os=(_t=class{constructor(t={}){A(this,M);A(this,se);A(this,re);A(this,we);A(this,Ne);A(this,ae);A(this,Ce);A(this,ke);k(this,M,t.queryCache||new Ss),k(this,se,t.mutationCache||new As),k(this,re,t.defaultOptions||{}),k(this,we,new Map),k(this,Ne,new Map),k(this,ae,0)}mount(){Fe(this,ae)._++,c(this,ae)===1&&(k(this,Ce,Ot.subscribe(async t=>{t&&(await this.resumePausedMutations(),c(this,M).onFocus())})),k(this,ke,He.subscribe(async t=>{t&&(await this.resumePausedMutations(),c(this,M).onOnline())})))}unmount(){var t,e;Fe(this,ae)._--,c(this,ae)===0&&((t=c(this,Ce))==null||t.call(this),k(this,Ce,void 0),(e=c(this,ke))==null||e.call(this),k(this,ke,void 0))}isFetching(t){return c(this,M).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return c(this,se).findAll({...t,status:"pending"}).length}getQueryData(t){var r;const e=this.defaultQueryOptions({queryKey:t});return(r=c(this,M).get(e.queryHash))==null?void 0:r.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),r=c(this,M).build(this,e),a=r.state.data;return a===void 0?this.fetchQuery(t):(t.revalidateIfStale&&r.isStaleByTime(et(e.staleTime,r))&&this.prefetchQuery(e),Promise.resolve(a))}getQueriesData(t){return c(this,M).findAll(t).map(({queryKey:e,state:r})=>{const a=r.data;return[e,a]})}setQueryData(t,e,r){const a=this.defaultQueryOptions({queryKey:t}),n=c(this,M).get(a.queryHash),i=n==null?void 0:n.state.data,o=ds(e,i);if(o!==void 0)return c(this,M).build(this,a).setData(o,{...r,manual:!0})}setQueriesData(t,e,r){return q.batch(()=>c(this,M).findAll(t).map(({queryKey:a})=>[a,this.setQueryData(a,e,r)]))}getQueryState(t){var r;const e=this.defaultQueryOptions({queryKey:t});return(r=c(this,M).get(e.queryHash))==null?void 0:r.state}removeQueries(t){const e=c(this,M);q.batch(()=>{e.findAll(t).forEach(r=>{e.remove(r)})})}resetQueries(t,e){const r=c(this,M);return q.batch(()=>(r.findAll(t).forEach(a=>{a.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const r={revert:!0,...e},a=q.batch(()=>c(this,M).findAll(t).map(n=>n.cancel(r)));return Promise.all(a).then(H).catch(H)}invalidateQueries(t,e={}){return q.batch(()=>(c(this,M).findAll(t).forEach(r=>{r.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const r={...e,cancelRefetch:e.cancelRefetch??!0},a=q.batch(()=>c(this,M).findAll(t).filter(n=>!n.isDisabled()&&!n.isStatic()).map(n=>{let i=n.fetch(void 0,r);return r.throwOnError||(i=i.catch(H)),n.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(a).then(H)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const r=c(this,M).build(this,e);return r.isStaleByTime(et(e.staleTime,r))?r.fetch(e):Promise.resolve(r.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(H).catch(H)}fetchInfiniteQuery(t){return t.behavior=xt(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(H).catch(H)}ensureInfiniteQueryData(t){return t.behavior=xt(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return He.isOnline()?c(this,se).resumePausedMutations():Promise.resolve()}getQueryCache(){return c(this,M)}getMutationCache(){return c(this,se)}getDefaultOptions(){return c(this,re)}setDefaultOptions(t){k(this,re,t)}setQueryDefaults(t,e){c(this,we).set(Ee(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...c(this,we).values()],r={};return e.forEach(a=>{Ae(t,a.queryKey)&&Object.assign(r,a.defaultOptions)}),r}setMutationDefaults(t,e){c(this,Ne).set(Ee(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...c(this,Ne).values()],r={};return e.forEach(a=>{Ae(t,a.mutationKey)&&Object.assign(r,a.defaultOptions)}),r}defaultQueryOptions(t){if(t._defaulted)return t;const e={...c(this,re).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=it(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===ot&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...c(this,re).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){c(this,M).clear(),c(this,se).clear()}},M=new WeakMap,se=new WeakMap,re=new WeakMap,we=new WeakMap,Ne=new WeakMap,ae=new WeakMap,Ce=new WeakMap,ke=new WeakMap,_t),Rs=p.createContext(void 0),Ts=({client:t,children:e})=>(p.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),s.jsx(Rs.Provider,{value:t,children:e}));const Ls=p.createContext(null),Je={didCatch:!1,error:null};class Dt extends p.Component{constructor(e){super(e),this.resetErrorBoundary=this.resetErrorBoundary.bind(this),this.state=Je}static getDerivedStateFromError(e){return{didCatch:!0,error:e}}resetErrorBoundary(){const{error:e}=this.state;if(e!==null){for(var r,a,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];(r=(a=this.props).onReset)===null||r===void 0||r.call(a,{args:i,reason:"imperative-api"}),this.setState(Je)}}componentDidCatch(e,r){var a,n;(a=(n=this.props).onError)===null||a===void 0||a.call(n,e,r)}componentDidUpdate(e,r){const{didCatch:a}=this.state,{resetKeys:n}=this.props;if(a&&r.error!==null&&Fs(e.resetKeys,n)){var i,o;(i=(o=this.props).onReset)===null||i===void 0||i.call(o,{next:n,prev:e.resetKeys,reason:"keys"}),this.setState(Je)}}render(){const{children:e,fallbackRender:r,FallbackComponent:a,fallback:n}=this.props,{didCatch:i,error:o}=this.state;let l=e;if(i){const d={error:o,resetErrorBoundary:this.resetErrorBoundary};if(typeof r=="function")l=r(d);else if(a)l=p.createElement(a,d);else if(n!==void 0)l=n;else throw o}return p.createElement(Ls.Provider,{value:{didCatch:i,error:o,resetErrorBoundary:this.resetErrorBoundary}},l)}}function Fs(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return t.length!==e.length||t.some((r,a)=>!Object.is(r,e[a]))}var qt=(t=>(t.BASE="base",t.BODY="body",t.HEAD="head",t.HTML="html",t.LINK="link",t.META="meta",t.NOSCRIPT="noscript",t.SCRIPT="script",t.STYLE="style",t.TITLE="title",t.FRAGMENT="Symbol(react.fragment)",t))(qt||{}),Ye={link:{rel:["amphtml","canonical","alternate"]},script:{type:["application/ld+json"]},meta:{charset:"",name:["generator","robots","description"],property:["og:type","og:title","og:url","og:image","og:image:alt","og:description","twitter:url","twitter:title","twitter:description","twitter:image","twitter:image:alt","twitter:card","twitter:site"]}};Object.values(qt);var lt={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"};Object.entries(lt).reduce((t,[e,r])=>(t[r]=e,t),{});var Me="data-rh",Ds=t=>Array.isArray(t)?t.join(""):t,qs=(t,e)=>{const r=Object.keys(t);for(let a=0;a<r.length;a+=1)if(e[r[a]]&&e[r[a]].includes(t[r[a]]))return!0;return!1},Ze=(t,e)=>Array.isArray(t)?t.reduce((r,a)=>(qs(a,e)?r.priority.push(a):r.default.push(a),r),{priority:[],default:[]}):{default:t,priority:[]},Is=["noscript","script","style"],st=(t,e=!0)=>e===!1?String(t):String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;"),It=t=>Object.keys(t).reduce((e,r)=>{const a=typeof t[r]<"u"?`${r}="${t[r]}"`:`${r}`;return e?`${e} ${a}`:a},""),$s=(t,e,r,a)=>{const n=It(r),i=Ds(e);return n?`<${t} ${Me}="true" ${n}>${st(i,a)}</${t}>`:`<${t} ${Me}="true">${st(i,a)}</${t}>`},Us=(t,e,r=!0)=>e.reduce((a,n)=>{const i=n,o=Object.keys(i).filter(u=>!(u==="innerHTML"||u==="cssText")).reduce((u,x)=>{const y=typeof i[x]>"u"?x:`${x}="${st(i[x],r)}"`;return u?`${u} ${y}`:y},""),l=i.innerHTML||i.cssText||"",d=Is.indexOf(t)===-1;return`${a}<${t} ${Me}="true" ${o}${d?"/>":`>${l}</${t}>`}`},""),$t=(t,e={})=>Object.keys(t).reduce((r,a)=>{const n=lt[a];return r[n||a]=t[a],r},e),Hs=(t,e,r)=>{const a={key:e,[Me]:!0},n=$t(r,a);return[ne.createElement("title",n,e)]},$e=(t,e)=>e.map((r,a)=>{const n={key:a,[Me]:!0};return Object.keys(r).forEach(i=>{const l=lt[i]||i;if(l==="innerHTML"||l==="cssText"){const d=r.innerHTML||r.cssText;n.dangerouslySetInnerHTML={__html:d}}else n[l]=r[i]}),ne.createElement(t,n)}),I=(t,e,r=!0)=>{switch(t){case"title":return{toComponent:()=>Hs(t,e.title,e.titleAttributes),toString:()=>$s(t,e.title,e.titleAttributes,r)};case"bodyAttributes":case"htmlAttributes":return{toComponent:()=>$t(e),toString:()=>It(e)};default:return{toComponent:()=>$e(t,e),toString:()=>Us(t,e,r)}}},zs=({metaTags:t,linkTags:e,scriptTags:r,encode:a})=>{const n=Ze(t,Ye.meta),i=Ze(e,Ye.link),o=Ze(r,Ye.script);return{priorityMethods:{toComponent:()=>[...$e("meta",n.priority),...$e("link",i.priority),...$e("script",o.priority)],toString:()=>`${I("meta",n.priority,a)} ${I("link",i.priority,a)} ${I("script",o.priority,a)}`},metaTags:n.default,linkTags:i.default,scriptTags:o.default}},Bs=t=>{const{baseTag:e,bodyAttributes:r,encode:a=!0,htmlAttributes:n,noscriptTags:i,styleTags:o,title:l="",titleAttributes:d,prioritizeSeoTags:u}=t;let{linkTags:x,metaTags:y,scriptTags:f}=t,h={toComponent:()=>{},toString:()=>""};return u&&({priorityMethods:h,linkTags:x,metaTags:y,scriptTags:f}=zs(t)),{priority:h,base:I("base",e,a),bodyAttributes:I("bodyAttributes",r,a),htmlAttributes:I("htmlAttributes",n,a),link:I("link",x,a),meta:I("meta",y,a),noscript:I("noscript",i,a),script:I("script",f,a),style:I("style",o,a),title:I("title",{title:l,titleAttributes:d},a)}},Qs=Bs,qe=[],Ut=!!(typeof window<"u"&&window.document&&window.document.createElement),Ws=class{constructor(t,e){oe(this,"instances",[]);oe(this,"canUseDOM",Ut);oe(this,"context");oe(this,"value",{setHelmet:t=>{this.context.helmet=t},helmetInstances:{get:()=>this.canUseDOM?qe:this.instances,add:t=>{(this.canUseDOM?qe:this.instances).push(t)},remove:t=>{const e=(this.canUseDOM?qe:this.instances).indexOf(t);(this.canUseDOM?qe:this.instances).splice(e,1)}}});this.context=t,this.canUseDOM=e||!1,e||(t.helmet=Qs({baseTag:[],bodyAttributes:{},htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}}))}},Vs={},Ks=ne.createContext(Vs),xe,Gs=(xe=class extends p.Component{constructor(r){super(r);oe(this,"helmetData");this.helmetData=new Ws(this.props.context||{},xe.canUseDOM)}render(){return ne.createElement(Ks.Provider,{value:this.helmetData.value},this.props.children)}},oe(xe,"canUseDOM",Ut),xe);let Js={data:""},Ys=t=>typeof window=="object"?((t?t.querySelector("#_goober"):window._goober)||Object.assign((t||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:t||Js,Zs=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,Xs=/\/\*[^]*?\*\/|  +/g,yt=/\n+/g,X=(t,e)=>{let r="",a="",n="";for(let i in t){let o=t[i];i[0]=="@"?i[1]=="i"?r=i+" "+o+";":a+=i[1]=="f"?X(o,i):i+"{"+X(o,i[1]=="k"?"":e)+"}":typeof o=="object"?a+=X(o,e?e.replace(/([^,])+/g,l=>i.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,d=>/&/.test(d)?d.replace(/&/g,l):l?l+" "+d:d)):i):o!=null&&(i=/^--/.test(i)?i:i.replace(/[A-Z]/g,"-$&").toLowerCase(),n+=X.p?X.p(i,o):i+":"+o+";")}return r+(e&&n?e+"{"+n+"}":n)+a},K={},Ht=t=>{if(typeof t=="object"){let e="";for(let r in t)e+=r+Ht(t[r]);return e}return t},er=(t,e,r,a,n)=>{let i=Ht(t),o=K[i]||(K[i]=(d=>{let u=0,x=11;for(;u<d.length;)x=101*x+d.charCodeAt(u++)>>>0;return"go"+x})(i));if(!K[o]){let d=i!==t?t:(u=>{let x,y,f=[{}];for(;x=Zs.exec(u.replace(Xs,""));)x[4]?f.shift():x[3]?(y=x[3].replace(yt," ").trim(),f.unshift(f[0][y]=f[0][y]||{})):f[0][x[1]]=x[2].replace(yt," ").trim();return f[0]})(t);K[o]=X(n?{["@keyframes "+o]:d}:d,r?"":"."+o)}let l=r&&K.g?K.g:null;return r&&(K.g=K[o]),((d,u,x,y)=>{y?u.data=u.data.replace(y,d):u.data.indexOf(d)===-1&&(u.data=x?d+u.data:u.data+d)})(K[o],e,a,l),o},tr=(t,e,r)=>t.reduce((a,n,i)=>{let o=e[i];if(o&&o.call){let l=o(r),d=l&&l.props&&l.props.className||/^go/.test(l)&&l;o=d?"."+d:l&&typeof l=="object"?l.props?"":X(l,""):l===!1?"":l}return a+n+(o??"")},"");function Ve(t){let e=this||{},r=t.call?t(e.p):t;return er(r.unshift?r.raw?tr(r,[].slice.call(arguments,1),e.p):r.reduce((a,n)=>Object.assign(a,n&&n.call?n(e.p):n),{}):r,Ys(e.target),e.g,e.o,e.k)}let zt,rt,at;Ve.bind({g:1});let Y=Ve.bind({k:1});function sr(t,e,r,a){X.p=e,zt=t,rt=r,at=a}function ie(t,e){let r=this||{};return function(){let a=arguments;function n(i,o){let l=Object.assign({},i),d=l.className||n.className;r.p=Object.assign({theme:rt&&rt()},l),r.o=/ *go\d+/.test(d),l.className=Ve.apply(r,a)+(d?" "+d:"");let u=t;return t[0]&&(u=l.as||t,delete l.as),at&&u[0]&&at(l),zt(u,l)}return n}}var rr=t=>typeof t=="function",ze=(t,e)=>rr(t)?t(e):t,ar=(()=>{let t=0;return()=>(++t).toString()})(),Bt=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");t=!e||e.matches}return t}})(),nr=20,Qt=(t,e)=>{switch(e.type){case 0:return{...t,toasts:[e.toast,...t.toasts].slice(0,nr)};case 1:return{...t,toasts:t.toasts.map(i=>i.id===e.toast.id?{...i,...e.toast}:i)};case 2:let{toast:r}=e;return Qt(t,{type:t.toasts.find(i=>i.id===r.id)?1:0,toast:r});case 3:let{toastId:a}=e;return{...t,toasts:t.toasts.map(i=>i.id===a||a===void 0?{...i,dismissed:!0,visible:!1}:i)};case 4:return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(i=>i.id!==e.toastId)};case 5:return{...t,pausedAt:e.time};case 6:let n=e.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(i=>({...i,pauseDuration:i.pauseDuration+n}))}}},Ue=[],ce={toasts:[],pausedAt:void 0},ge=t=>{ce=Qt(ce,t),Ue.forEach(e=>{e(ce)})},ir={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},or=(t={})=>{let[e,r]=p.useState(ce),a=p.useRef(ce);p.useEffect(()=>(a.current!==ce&&r(ce),Ue.push(r),()=>{let i=Ue.indexOf(r);i>-1&&Ue.splice(i,1)}),[]);let n=e.toasts.map(i=>{var o,l,d;return{...t,...t[i.type],...i,removeDelay:i.removeDelay||((o=t[i.type])==null?void 0:o.removeDelay)||(t==null?void 0:t.removeDelay),duration:i.duration||((l=t[i.type])==null?void 0:l.duration)||(t==null?void 0:t.duration)||ir[i.type],style:{...t.style,...(d=t[i.type])==null?void 0:d.style,...i.style}}});return{...e,toasts:n}},lr=(t,e="blank",r)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...r,id:(r==null?void 0:r.id)||ar()}),Te=t=>(e,r)=>{let a=lr(e,t,r);return ge({type:2,toast:a}),a.id},E=(t,e)=>Te("blank")(t,e);E.error=Te("error");E.success=Te("success");E.loading=Te("loading");E.custom=Te("custom");E.dismiss=t=>{ge({type:3,toastId:t})};E.remove=t=>ge({type:4,toastId:t});E.promise=(t,e,r)=>{let a=E.loading(e.loading,{...r,...r==null?void 0:r.loading});return typeof t=="function"&&(t=t()),t.then(n=>{let i=e.success?ze(e.success,n):void 0;return i?E.success(i,{id:a,...r,...r==null?void 0:r.success}):E.dismiss(a),n}).catch(n=>{let i=e.error?ze(e.error,n):void 0;i?E.error(i,{id:a,...r,...r==null?void 0:r.error}):E.dismiss(a)}),t};var cr=(t,e)=>{ge({type:1,toast:{id:t,height:e}})},dr=()=>{ge({type:5,time:Date.now()})},Pe=new Map,ur=1e3,hr=(t,e=ur)=>{if(Pe.has(t))return;let r=setTimeout(()=>{Pe.delete(t),ge({type:4,toastId:t})},e);Pe.set(t,r)},mr=t=>{let{toasts:e,pausedAt:r}=or(t);p.useEffect(()=>{if(r)return;let i=Date.now(),o=e.map(l=>{if(l.duration===1/0)return;let d=(l.duration||0)+l.pauseDuration-(i-l.createdAt);if(d<0){l.visible&&E.dismiss(l.id);return}return setTimeout(()=>E.dismiss(l.id),d)});return()=>{o.forEach(l=>l&&clearTimeout(l))}},[e,r]);let a=p.useCallback(()=>{r&&ge({type:6,time:Date.now()})},[r]),n=p.useCallback((i,o)=>{let{reverseOrder:l=!1,gutter:d=8,defaultPosition:u}=o||{},x=e.filter(h=>(h.position||u)===(i.position||u)&&h.height),y=x.findIndex(h=>h.id===i.id),f=x.filter((h,b)=>b<y&&h.visible).length;return x.filter(h=>h.visible).slice(...l?[f+1]:[0,f]).reduce((h,b)=>h+(b.height||0)+d,0)},[e]);return p.useEffect(()=>{e.forEach(i=>{if(i.dismissed)hr(i.id,i.removeDelay);else{let o=Pe.get(i.id);o&&(clearTimeout(o),Pe.delete(i.id))}})},[e]),{toasts:e,handlers:{updateHeight:cr,startPause:dr,endPause:a,calculateOffset:n}}},pr=Y`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,fr=Y`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,xr=Y`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,gr=ie("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${pr} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${fr} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${xr} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,yr=Y`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,br=ie("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${yr} 1s linear infinite;
`,vr=Y`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,jr=Y`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,wr=ie("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${vr} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${jr} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,Nr=ie("div")`
  position: absolute;
`,Cr=ie("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,kr=Y`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,_r=ie("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${kr} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,Sr=({toast:t})=>{let{icon:e,type:r,iconTheme:a}=t;return e!==void 0?typeof e=="string"?p.createElement(_r,null,e):e:r==="blank"?null:p.createElement(Cr,null,p.createElement(br,{...a}),r!=="loading"&&p.createElement(Nr,null,r==="error"?p.createElement(gr,{...a}):p.createElement(wr,{...a})))},Pr=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,Er=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,Ar="0%{opacity:0;} 100%{opacity:1;}",Mr="0%{opacity:1;} 100%{opacity:0;}",Or=ie("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,Rr=ie("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,Tr=(t,e)=>{let r=t.includes("top")?1:-1,[a,n]=Bt()?[Ar,Mr]:[Pr(r),Er(r)];return{animation:e?`${Y(a)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Y(n)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},Lr=p.memo(({toast:t,position:e,style:r,children:a})=>{let n=t.height?Tr(t.position||e||"top-center",t.visible):{opacity:0},i=p.createElement(Sr,{toast:t}),o=p.createElement(Rr,{...t.ariaProps},ze(t.message,t));return p.createElement(Or,{className:t.className,style:{...n,...r,...t.style}},typeof a=="function"?a({icon:i,message:o}):p.createElement(p.Fragment,null,i,o))});sr(p.createElement);var Fr=({id:t,className:e,style:r,onHeightUpdate:a,children:n})=>{let i=p.useCallback(o=>{if(o){let l=()=>{let d=o.getBoundingClientRect().height;a(t,d)};l(),new MutationObserver(l).observe(o,{subtree:!0,childList:!0,characterData:!0})}},[t,a]);return p.createElement("div",{ref:i,className:e,style:r},n)},Dr=(t,e)=>{let r=t.includes("top"),a=r?{top:0}:{bottom:0},n=t.includes("center")?{justifyContent:"center"}:t.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:Bt()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(r?1:-1)}px)`,...a,...n}},qr=Ve`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Ie=16,Ir=({reverseOrder:t,position:e="top-center",toastOptions:r,gutter:a,children:n,containerStyle:i,containerClassName:o})=>{let{toasts:l,handlers:d}=mr(r);return p.createElement("div",{id:"_rht_toaster",style:{position:"fixed",zIndex:9999,top:Ie,left:Ie,right:Ie,bottom:Ie,pointerEvents:"none",...i},className:o,onMouseEnter:d.startPause,onMouseLeave:d.endPause},l.map(u=>{let x=u.position||e,y=d.calculateOffset(u,{reverseOrder:t,gutter:a,defaultPosition:e}),f=Dr(x,y);return p.createElement(Fr,{id:u.id,key:u.id,onHeightUpdate:d.updateHeight,className:u.visible?qr:"",style:f},u.type==="custom"?ze(u.message,u):n?n(u):p.createElement(Lr,{toast:u,position:x}))}))};const $r="https://gpmtmktjrwoplfevvmsa.supabase.co",Ur="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdwbXRta3RqcndvcGxmZXZ2bXNhIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTM1NTAzODQsImV4cCI6MjA2OTEyNjM4NH0.sboGwGBiU0VoCeUHM2RruyVJbkGGRqPQh6jqbdmTnZI",O=rs($r,Ur),Wt=p.createContext(void 0),_e=()=>{const t=p.useContext(Wt);if(t===void 0)throw new Error("useAuthContext must be used within an AuthProvider");return t},Vt=({children:t})=>{const[e,r]=p.useState(null),[a,n]=p.useState(null),[i,o]=p.useState([]),[l,d]=p.useState(!0),u=p.useCallback(async v=>{var N,C;try{const P=O.from("users").select("*").eq("id",v.id).single(),g=new Promise((U,Le)=>{setTimeout(()=>Le(new Error("Profile query timeout")),5e3)}),w=await Promise.race([P,g]),{data:R,error:S}=w;if(S)throw S;n(R)}catch(P){console.error("Error loading profile:",P),n({id:v.id,first_name:((N=v.user_metadata)==null?void 0:N.first_name)||"",last_name:((C=v.user_metadata)==null?void 0:C.last_name)||"",email:v.email||"",created_at:new Date().toISOString(),updated_at:new Date().toISOString()})}},[]),x=p.useCallback(async v=>{try{const N=O.from("user_roles").select(`
          *,
          role:user_roles_ref(*)
        `).eq("user_id",v.id),C=new Promise((R,S)=>{setTimeout(()=>S(new Error("User roles query timeout")),5e3)}),P=await Promise.race([N,C]),{data:g,error:w}=P;if(w)throw w;o(g||[])}catch(N){console.error("Error loading user roles:",N),o([])}},[]),y=async(v,N)=>{try{const{error:C}=await O.auth.signInWithPassword({email:v,password:N});return C?{success:!1,error:C.message}:{success:!0}}catch(C){return{success:!1,error:C instanceof Error?C.message:"Failed to sign in"}}},f=p.useCallback(async(v,N,C,P,g)=>{try{const{data:w,error:R}=await O.auth.signUp({email:v,password:N,options:{data:{first_name:C,last_name:P}}});if(R)throw R;if(w.user){const{error:S}=await O.from("users").insert({id:w.user.id,first_name:C,last_name:P,email:v,role_id:g});if(S)throw S;if(g){const{error:U}=await O.from("user_roles").insert({user_id:w.user.id,role_id:g});if(U)throw U}}return{success:!0}}catch(w){return console.error("Error signing up:",w),{success:!1,error:w instanceof Error?w.message:"Failed to sign up"}}},[]),h=p.useCallback(async()=>{try{const{error:v}=await O.auth.signOut();if(v)throw v}catch(v){console.error("Error signing out:",v)}},[]),b=p.useCallback(async()=>{e&&await Promise.all([u(e),x(e)])},[e,u,x]),j=p.useCallback(()=>i.some(v=>v.role.role_name==="administrator"),[i]),m=p.useCallback(()=>i.some(v=>v.role.role_name==="wound_specialist_nurse"),[i]);p.useEffect(()=>{(async()=>{try{const{data:{session:C}}=await O.auth.getSession();C!=null&&C.user&&(r(C.user),await Promise.all([u(C.user),x(C.user)]))}catch(C){console.error("Error getting initial session:",C)}finally{d(!1)}})();const{data:{subscription:N}}=O.auth.onAuthStateChange(async(C,P)=>{P!=null&&P.user?(r(P.user),await Promise.all([u(P.user),x(P.user)])):(r(null),n(null),o([])),d(!1)});return()=>N.unsubscribe()},[]);const _={user:e,profile:a,roles:i,loading:l,signIn:y,signUp:f,signOut:h,refreshProfile:b,isAdmin:j,isWoundSpecialist:m};return s.jsx(Wt.Provider,{value:_,children:t})},Hr=p.createContext(void 0),Kt=({children:t})=>{const[e,r]=p.useState(navigator.onLine),[a,n]=p.useState(!1),[i,o]=p.useState(0),[l,d]=p.useState(null);p.useEffect(()=>{const h=()=>{r(!0),u()},b=()=>{r(!1)};return window.addEventListener("online",h),window.addEventListener("offline",b),e&&u(),()=>{window.removeEventListener("online",h),window.removeEventListener("offline",b)}},[e]);const u=async()=>{if(!(!e||a)){n(!0);try{await new Promise(h=>setTimeout(h,1e3)),d(new Date),o(0)}catch(h){console.error("Sync failed:",h)}finally{n(!1)}}},f={isOnline:e,isSyncing:a,pendingChanges:i,lastSyncTime:l,syncData:u,addPendingChange:()=>{o(h=>h+1)},removePendingChange:()=>{o(h=>Math.max(0,h-1))}};return s.jsx(Hr.Provider,{value:f,children:t})},zr=()=>s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Loading..."}),s.jsx("p",{className:"text-gray-600",children:"Please wait"})]})}),Gt=({error:t,resetErrorBoundary:e})=>s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:s.jsxs("div",{className:"max-w-md w-full bg-white shadow-lg rounded-lg p-6",children:[s.jsx("div",{className:"flex items-center justify-center w-12 h-12 mx-auto bg-red-100 rounded-full",children:s.jsx("svg",{className:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),s.jsxs("div",{className:"mt-4 text-center",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Something went wrong"}),s.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"An unexpected error occurred. Please try again."}),!1,s.jsxs("div",{className:"mt-6 flex space-x-3",children:[s.jsx("button",{onClick:e,className:"flex-1 bg-blue-600 text-white px-4 py-2 rounded-md text-sm font-medium hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:"Try Again"}),s.jsx("button",{onClick:()=>window.location.href="/",className:"flex-1 bg-gray-200 text-gray-700 px-4 py-2 rounded-md text-sm font-medium hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2",children:"Go Home"})]})]})]})}),Br=()=>{const[t,e]=p.useState(""),[r,a]=p.useState(""),[n,i]=p.useState(!1),{signIn:o}=_e(),l=St(),d=async u=>{u.preventDefault(),i(!0);try{console.log("Attempting login with email:",t);const x=await o(t,r);if(console.log("Login result:",x),x.success)E.success("Login successful!"),l("/dashboard");else{console.error("Login failed:",x.error);const y=x.error||"Login failed";E.error(y)}}catch(x){console.error("Login error:",x);const y=x instanceof Error?x.message:"An unexpected error occurred";E.error(y)}finally{i(!1)}};return s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100 py-12 px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"max-w-md w-full space-y-8",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"mx-auto h-16 w-16 bg-blue-600 rounded-full flex items-center justify-center mb-4",children:s.jsx("svg",{className:"h-8 w-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})})}),s.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Welcome to WHASA"}),s.jsx("p",{className:"text-gray-600",children:"Wound Care Management System"})]}),s.jsx("div",{className:"bg-white rounded-xl shadow-lg p-8",children:s.jsxs("form",{className:"space-y-6",onSubmit:d,children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),s.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,className:"clinical-input",placeholder:"Enter your email",value:t,onChange:u=>e(u.target.value)})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),s.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,className:"clinical-input",placeholder:"Enter your password",value:r,onChange:u=>a(u.target.value)})]})]}),s.jsx("button",{type:"submit",disabled:n,className:"clinical-button-primary w-full py-3 text-base font-semibold",children:n?s.jsxs("div",{className:"flex items-center justify-center",children:[s.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Signing in..."]}):"Sign In"})]})}),s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[s.jsx("p",{className:"text-sm text-blue-800 font-medium mb-1",children:"Demo Credentials"}),s.jsxs("p",{className:"text-xs text-blue-600",children:["Email: admin@whasa.com",s.jsx("br",{}),"Password: password123"]})]}),s.jsx("div",{className:"mt-4",children:s.jsxs("p",{className:"text-sm text-gray-600",children:["Don't have an account?"," ",s.jsx(le,{to:"/register",className:"font-medium text-blue-600 hover:text-blue-500",children:"Register here"})]})})]})]})})},Qr=()=>{const[t,e]=p.useState([]),[r,a]=p.useState(!0),[n,i]=p.useState(null),o=async()=>{try{a(!0),i(null);const{data:d,error:u}=await O.from("user_roles_ref").select("*").eq("is_active",!0).order("role_name");if(u)throw u;e(d||[])}catch(d){console.error("Error fetching roles:",d),i(d instanceof Error?d.message:"Failed to fetch roles")}finally{a(!1)}},l=d=>{const u=t.find(x=>x.role_name===d);return(u==null?void 0:u.id)||null};return p.useEffect(()=>{o()},[]),{roles:t,loading:r,error:n,fetchRoles:o,getRoleIdByName:l}},Wr=()=>{const[t,e]=p.useState({email:"",password:"",confirmPassword:"",username:"",firstName:"",lastName:"",professionalRegistration:"",phoneNumber:"",role:"wound_specialist_nurse"}),[r,a]=p.useState(!1),[n,i]=p.useState({}),{signUp:o}=_e(),{roles:l,loading:d,getRoleIdByName:u}=Qr(),x=St(),y=()=>{const b={};return t.email?/\S+@\S+\.\S+/.test(t.email)||(b.email="Please enter a valid email address"):b.email="Email is required",t.password?t.password.length<8?b.password="Password must be at least 8 characters long":/(?=.*[a-z])(?=.*[A-Z])(?=.*\d)/.test(t.password)||(b.password="Password must contain at least one uppercase letter, one lowercase letter, and one number"):b.password="Password is required",t.confirmPassword?t.password!==t.confirmPassword&&(b.confirmPassword="Passwords do not match"):b.confirmPassword="Please confirm your password",t.username?t.username.length<3&&(b.username="Username must be at least 3 characters long"):b.username="Username is required",t.firstName||(b.firstName="First name is required"),t.lastName||(b.lastName="Last name is required"),t.professionalRegistration||(b.professionalRegistration="Professional registration number is required"),t.phoneNumber?/^[\+]?[1-9][\d]{0,15}$/.test(t.phoneNumber.replace(/\s/g,""))||(b.phoneNumber="Please enter a valid phone number"):b.phoneNumber="Phone number is required",i(b),Object.keys(b).length===0},f=b=>{const{name:j,value:m}=b.target;e(_=>({..._,[j]:m})),n[j]&&i(_=>({..._,[j]:void 0}))},h=async b=>{if(b.preventDefault(),!y()){E.error("Please fix the errors in the form");return}a(!0);try{const j=u(t.role)||void 0,m=await o(t.email,t.password,t.firstName,t.lastName,j);if(m.success)E.success("Registration successful! Please check your email for verification."),x("/login");else{console.error("Registration failed:",m.error);const _=m.error||"Registration failed";E.error(_)}}catch(j){console.error("Registration error:",j);const m=j instanceof Error?j.message:"An unexpected error occurred";E.error(m)}finally{a(!1)}};return s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100 py-12 px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"max-w-md w-full space-y-8",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"mx-auto h-16 w-16 bg-blue-600 rounded-full flex items-center justify-center mb-4",children:s.jsx("svg",{className:"h-8 w-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z"})})}),s.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Join WHASA"}),s.jsx("p",{className:"text-gray-600",children:"Create your account to access the Wound Care Management System"})]}),s.jsx("div",{className:"bg-white rounded-xl shadow-lg p-8",children:s.jsxs("form",{className:"space-y-6",onSubmit:h,children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address *"}),s.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,className:`clinical-input ${n.email?"border-red-500 focus:ring-red-500 focus:border-red-500":""}`,placeholder:"Enter your email",value:t.email,onChange:f}),n.email&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:n.email})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700 mb-2",children:"Username *"}),s.jsx("input",{id:"username",name:"username",type:"text",autoComplete:"username",required:!0,className:`clinical-input ${n.username?"border-red-500 focus:ring-red-500 focus:border-red-500":""}`,placeholder:"Choose a username",value:t.username,onChange:f}),n.username&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:n.username})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"firstName",className:"block text-sm font-medium text-gray-700 mb-2",children:"First Name *"}),s.jsx("input",{id:"firstName",name:"firstName",type:"text",autoComplete:"given-name",required:!0,className:`clinical-input ${n.firstName?"border-red-500 focus:ring-red-500 focus:border-red-500":""}`,placeholder:"Enter your first name",value:t.firstName,onChange:f}),n.firstName&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:n.firstName})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"lastName",className:"block text-sm font-medium text-gray-700 mb-2",children:"Last Name *"}),s.jsx("input",{id:"lastName",name:"lastName",type:"text",autoComplete:"family-name",required:!0,className:`clinical-input ${n.lastName?"border-red-500 focus:ring-red-500 focus:border-red-500":""}`,placeholder:"Enter your last name",value:t.lastName,onChange:f}),n.lastName&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:n.lastName})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"professionalRegistration",className:"block text-sm font-medium text-gray-700 mb-2",children:"Professional Registration Number *"}),s.jsx("input",{id:"professionalRegistration",name:"professionalRegistration",type:"text",required:!0,className:`clinical-input ${n.professionalRegistration?"border-red-500 focus:ring-red-500 focus:border-red-500":""}`,placeholder:"e.g., SANC registration number",value:t.professionalRegistration,onChange:f}),n.professionalRegistration&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:n.professionalRegistration})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"phoneNumber",className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number *"}),s.jsx("input",{id:"phoneNumber",name:"phoneNumber",type:"tel",autoComplete:"tel",required:!0,className:`clinical-input ${n.phoneNumber?"border-red-500 focus:ring-red-500 focus:border-red-500":""}`,placeholder:"Enter your phone number",value:t.phoneNumber,onChange:f}),n.phoneNumber&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:n.phoneNumber})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"role",className:"block text-sm font-medium text-gray-700 mb-2",children:"Professional Role *"}),s.jsx("select",{id:"role",name:"role",required:!0,className:"clinical-input",value:t.role,onChange:f,disabled:d,children:d?s.jsx("option",{children:"Loading roles..."}):l.map(b=>s.jsx("option",{value:b.role_name,children:b.description||b.role_name},b.id))})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Password *"}),s.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"new-password",required:!0,className:`clinical-input ${n.password?"border-red-500 focus:ring-red-500 focus:border-red-500":""}`,placeholder:"Create a strong password",value:t.password,onChange:f}),n.password&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:n.password})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm Password *"}),s.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:"password",autoComplete:"new-password",required:!0,className:`clinical-input ${n.confirmPassword?"border-red-500 focus:ring-red-500 focus:border-red-500":""}`,placeholder:"Confirm your password",value:t.confirmPassword,onChange:f}),n.confirmPassword&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:n.confirmPassword})]})]}),s.jsx("button",{type:"submit",disabled:r||d,className:"clinical-button-primary w-full py-3 text-base font-semibold",children:r?s.jsxs("div",{className:"flex items-center justify-center",children:[s.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Creating Account..."]}):"Create Account"})]})}),s.jsx("div",{className:"text-center",children:s.jsxs("p",{className:"text-sm text-gray-600",children:["Already have an account?"," ",s.jsx(le,{to:"/login",className:"font-medium text-blue-600 hover:text-blue-500",children:"Sign in here"})]})})]})})},Vr=()=>s.jsxs("div",{style:{padding:"20px",fontFamily:"Arial, sans-serif",backgroundColor:"#f5f5f5",minHeight:"100vh"},children:[s.jsx("h1",{style:{color:"#333"},children:"WHASA Test Page"}),s.jsx("p",{children:"This is a test page to verify React is working properly."}),s.jsxs("div",{style:{backgroundColor:"white",padding:"20px",borderRadius:"8px",margin:"20px 0",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[s.jsx("h2",{children:"Status Check:"}),s.jsxs("ul",{children:[s.jsx("li",{children:"✅ React is rendering"}),s.jsx("li",{children:"✅ Development server is running"}),s.jsx("li",{children:"✅ Routing is working"}),s.jsx("li",{children:"✅ Components are loading"})]})]}),s.jsxs("div",{style:{backgroundColor:"#e3f2fd",padding:"15px",borderRadius:"8px",border:"1px solid #2196f3"},children:[s.jsx("h3",{children:"Next Steps:"}),s.jsx("p",{children:"1. Set up Supabase authentication"}),s.jsx("p",{children:"2. Configure environment variables"}),s.jsx("p",{children:"3. Test login functionality"}),s.jsx("p",{children:"4. Access protected routes"})]}),s.jsx("button",{onClick:()=>alert("React is working!"),style:{backgroundColor:"#4caf50",color:"white",border:"none",padding:"10px 20px",borderRadius:"4px",cursor:"pointer",fontSize:"16px"},children:"Test React Functionality"})]}),Kr=()=>{const{profile:t,roles:e,isAdmin:r,isWoundSpecialist:a,signOut:n}=_e(),i=Xt(),[o,l]=p.useState(!1),d=h=>({administrator:"Administrator",wound_specialist_nurse:"Wound Specialist Nurse",case_manager:"Case Manager",general_nurse:"General Nurse"})[h]||h,u=h=>i.pathname===h||i.pathname.startsWith(h+"/"),x=[{name:"Dashboard",href:"/dashboard",icon:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"},{name:"Patients",href:"/patients",icon:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"},{name:"Booking System",href:"/booking",icon:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"}],y=[{name:"Wound Assessment",href:"/wound-assessment",icon:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"},{name:"Care Planning",href:"/care-planning",icon:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"},{name:"Therapy Execution",href:"/therapy-execution",icon:"M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"}],f=[{name:"User Management",href:"/admin/user-management",icon:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"},{name:"Reference Tables",href:"/admin/reference-tables",icon:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"}];return s.jsxs("div",{className:"flex h-screen bg-gray-100",children:[s.jsxs("div",{className:`fixed inset-y-0 left-0 z-50 w-64 bg-white shadow-lg transform ${o?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out lg:translate-x-0 lg:static lg:inset-0`,children:[s.jsxs("div",{className:"flex items-center justify-between h-16 px-6 border-b border-gray-200",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-lg flex items-center justify-center",children:s.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})})})}),s.jsxs("div",{className:"ml-3",children:[s.jsx("h1",{className:"text-lg font-semibold text-gray-900",children:"WHASA"}),s.jsx("p",{className:"text-xs text-gray-500",children:"Wound Care System"})]})]}),s.jsx("button",{onClick:()=>l(!1),className:"lg:hidden p-1 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-10 h-10 bg-gray-300 rounded-full flex items-center justify-center",children:s.jsx("svg",{className:"w-6 h-6 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})})}),s.jsxs("div",{className:"ml-3",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:t?`${t.first_name} ${t.last_name}`:"User"}),s.jsx("p",{className:"text-xs text-gray-500",children:(t==null?void 0:t.email)||"user@example.com"})]})]})}),s.jsx("nav",{className:"mt-5 px-2",children:s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"px-2 py-2 mb-4",children:[s.jsx("div",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider mb-2",children:"Your Roles"}),e&&e.length>0?s.jsx("div",{className:"space-y-1",children:e.map((h,b)=>s.jsx("div",{className:"text-xs text-gray-600 bg-gray-50 rounded px-2 py-1",children:d(h.role.role_name)},b))}):s.jsx("div",{className:"text-xs text-gray-500 italic",children:"No roles assigned"})]}),x.map(h=>s.jsxs(le,{to:h.href,className:`group flex items-center px-2 py-2 text-sm font-medium rounded-md transition-colors ${u(h.href)?"bg-blue-100 text-blue-900":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"}`,children:[s.jsx("svg",{className:`mr-3 h-5 w-5 ${u(h.href)?"text-blue-500":"text-gray-400 group-hover:text-gray-500"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:h.icon})}),h.name]},h.name)),(a()||r())&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"pt-4 border-t border-gray-200",children:s.jsx("h3",{className:"px-2 text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Clinical Features"})}),y.map(h=>s.jsxs(le,{to:h.href,className:`group flex items-center px-2 py-2 text-sm font-medium rounded-md transition-colors ${u(h.href)?"bg-blue-100 text-blue-900":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"}`,children:[s.jsx("svg",{className:`mr-3 h-5 w-5 ${u(h.href)?"text-blue-500":"text-gray-400 group-hover:text-gray-500"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:h.icon})}),h.name]},h.name))]}),r()&&s.jsxs("div",{className:"pt-4 border-t border-gray-200",children:[s.jsx("h3",{className:"px-2 text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Administration"}),s.jsx("div",{className:"mt-2 space-y-1",children:f.map(h=>s.jsxs(le,{to:h.href,className:`group flex items-center px-2 py-2 text-sm font-medium rounded-md transition-colors ${u(h.href)?"bg-blue-100 text-blue-900":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"}`,children:[s.jsx("svg",{className:`mr-3 h-5 w-5 ${u(h.href)?"text-blue-500":"text-gray-400 group-hover:text-gray-500"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:h.icon})}),h.name]},h.name))})]}),s.jsx("div",{className:"pt-4 border-t border-gray-200",children:s.jsxs(le,{to:"/settings",className:`group flex items-center px-2 py-2 text-sm font-medium rounded-md transition-colors ${u("/settings")?"bg-blue-100 text-blue-900":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"}`,children:[s.jsxs("svg",{className:`mr-3 h-5 w-5 ${u("/settings")?"text-blue-500":"text-gray-400 group-hover:text-gray-500"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),"Settings"]})})]})}),s.jsx("div",{className:"absolute bottom-0 w-full p-4 border-t border-gray-200",children:s.jsxs("button",{onClick:()=>n(),className:"w-full flex items-center px-2 py-2 text-sm font-medium text-gray-600 rounded-md hover:bg-gray-50 hover:text-gray-900 transition-colors",children:[s.jsx("svg",{className:"mr-3 h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),"Sign Out"]})})]}),s.jsx("div",{className:"lg:hidden fixed top-4 left-4 z-50",children:s.jsx("button",{onClick:()=>l(!0),className:"p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})}),s.jsx("div",{className:"flex-1 flex flex-col overflow-hidden",children:s.jsx("main",{className:"flex-1 overflow-y-auto bg-gray-50",children:s.jsx(es,{})})}),o&&s.jsx("div",{className:"fixed inset-0 z-40 bg-black bg-opacity-50 lg:hidden",onClick:()=>l(!1)})]})},Gr=()=>{const{profile:t}=_e(),e=[{title:"Register New Patient",description:"Add a new patient to the system",icon:s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),href:"/patients/new",color:"bg-blue-500 hover:bg-blue-600"},{title:"Patient List",description:"View and manage all patients",icon:s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),href:"/patients",color:"bg-green-500 hover:bg-green-600"},{title:"Wound Assessment",description:"Perform T.I.M.E. framework assessment",icon:s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),href:"/assessment",color:"bg-purple-500 hover:bg-purple-600"},{title:"Care Planning",description:"Create evidence-based care plans",icon:s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),href:"/care-planning",color:"bg-orange-500 hover:bg-orange-600"}],r=[{name:"Active Patients",value:"24",change:"+12%",changeType:"increase"},{name:"Pending Assessments",value:"8",change:"+3",changeType:"increase"},{name:"This Week's Visits",value:"15",change:"-2%",changeType:"decrease"},{name:"Healing Rate",value:"78%",change:"+5%",changeType:"increase"}];return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[s.jsxs("h1",{className:"text-2xl font-bold text-gray-900",children:["Welcome back, ",(t==null?void 0:t.first_name)||"Nurse","!"]}),s.jsx("p",{className:"text-gray-600 mt-1",children:"Here's what's happening with your patients today."})]}),s.jsx("div",{className:"grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-4",children:r.map(a=>s.jsx("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:s.jsx("div",{className:"p-5",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-md flex items-center justify-center",children:s.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})})})}),s.jsx("div",{className:"ml-5 w-0 flex-1",children:s.jsxs("dl",{children:[s.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:a.name}),s.jsxs("dd",{className:"flex items-baseline",children:[s.jsx("div",{className:"text-2xl font-semibold text-gray-900",children:a.value}),s.jsx("div",{className:`ml-2 flex items-baseline text-sm font-semibold ${a.changeType==="increase"?"text-green-600":"text-red-600"}`,children:a.change})]})]})})]})})},a.name))}),s.jsxs("div",{className:"bg-white rounded-lg shadow",children:[s.jsxs("div",{className:"px-6 py-4 border-b border-gray-200",children:[s.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Quick Actions"}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Common tasks to get you started"})]}),s.jsx("div",{className:"p-6",children:s.jsx("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-4",children:e.map(a=>s.jsxs(le,{to:a.href,className:"relative group bg-white p-6 focus-within:ring-2 focus-within:ring-inset focus-within:ring-blue-500 rounded-lg border border-gray-200 hover:border-gray-300 transition-colors",children:[s.jsx("div",{children:s.jsx("span",{className:`rounded-lg inline-flex p-3 ${a.color} text-white ring-4 ring-white`,children:a.icon})}),s.jsxs("div",{className:"mt-4",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 group-hover:text-blue-600",children:a.title}),s.jsx("p",{className:"mt-2 text-sm text-gray-500",children:a.description})]}),s.jsx("span",{className:"absolute top-6 right-6 text-gray-300 group-hover:text-gray-400","aria-hidden":"true",children:s.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{d:"M20 4h1a1 1 0 00-1-1v1zm-1 12a1 1 0 102 0h-2zM8 3a1 1 0 000 2V3zM3.293 19.293a1 1 0 101.414 1.414l-1.414-1.414zM19 4v12h2V4h-2zm1-1H8v2h12V3zm-.707.293l-16 16 1.414 1.414 16-16-1.414-1.414z"})})})]},a.title))})})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow",children:[s.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:s.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Recent Activity"})}),s.jsx("div",{className:"p-6",children:s.jsx("div",{className:"flow-root",children:s.jsxs("ul",{className:"-mb-8",children:[s.jsx("li",{children:s.jsxs("div",{className:"relative pb-8",children:[s.jsx("span",{className:"absolute top-4 left-4 -ml-px h-full w-0.5 bg-gray-200","aria-hidden":"true"}),s.jsxs("div",{className:"relative flex space-x-3",children:[s.jsx("div",{children:s.jsx("span",{className:"h-8 w-8 rounded-full bg-green-500 flex items-center justify-center ring-8 ring-white",children:s.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})})}),s.jsxs("div",{className:"min-w-0 flex-1 pt-1.5 flex justify-between space-x-4",children:[s.jsx("div",{children:s.jsxs("p",{className:"text-sm text-gray-500",children:["New patient ",s.jsx("span",{className:"font-medium text-gray-900",children:"Sarah Johnson"})," registered"]})}),s.jsx("div",{className:"text-right text-sm whitespace-nowrap text-gray-500",children:s.jsx("time",{dateTime:"2024-01-15",children:"2 hours ago"})})]})]})]})}),s.jsx("li",{children:s.jsxs("div",{className:"relative pb-8",children:[s.jsx("span",{className:"absolute top-4 left-4 -ml-px h-full w-0.5 bg-gray-200","aria-hidden":"true"}),s.jsxs("div",{className:"relative flex space-x-3",children:[s.jsx("div",{children:s.jsx("span",{className:"h-8 w-8 rounded-full bg-blue-500 flex items-center justify-center ring-8 ring-white",children:s.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})})}),s.jsxs("div",{className:"min-w-0 flex-1 pt-1.5 flex justify-between space-x-4",children:[s.jsx("div",{children:s.jsxs("p",{className:"text-sm text-gray-500",children:["Assessment completed for ",s.jsx("span",{className:"font-medium text-gray-900",children:"Michael Brown"})]})}),s.jsx("div",{className:"text-right text-sm whitespace-nowrap text-gray-500",children:s.jsx("time",{dateTime:"2024-01-15",children:"4 hours ago"})})]})]})]})}),s.jsx("li",{children:s.jsx("div",{className:"relative",children:s.jsxs("div",{className:"relative flex space-x-3",children:[s.jsx("div",{children:s.jsx("span",{className:"h-8 w-8 rounded-full bg-yellow-500 flex items-center justify-center ring-8 ring-white",children:s.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})})}),s.jsxs("div",{className:"min-w-0 flex-1 pt-1.5 flex justify-between space-x-4",children:[s.jsx("div",{children:s.jsxs("p",{className:"text-sm text-gray-500",children:["Follow-up scheduled for ",s.jsx("span",{className:"font-medium text-gray-900",children:"Emma Wilson"})]})}),s.jsx("div",{className:"text-right text-sm whitespace-nowrap text-gray-500",children:s.jsx("time",{dateTime:"2024-01-15",children:"1 day ago"})})]})]})})})]})})})]})]})},Jr=()=>s.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Patient List"}),s.jsx("p",{className:"text-gray-600",children:"Patient list functionality coming soon..."})]}),Yr=()=>s.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Patient Registration"}),s.jsx("p",{className:"text-gray-600",children:"Patient registration form coming soon..."})]}),Zr=()=>s.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Wound Assessment"}),s.jsx("p",{className:"text-gray-600",children:"T.I.M.E. framework assessment form coming soon..."})]}),Xr=()=>s.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Care Planning"}),s.jsx("p",{className:"text-gray-600",children:"Evidence-based care planning wizard coming soon..."})]}),ea=()=>s.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Therapy Execution"}),s.jsx("p",{className:"text-gray-600",children:"NPWT and conventional therapy workflows coming soon..."})]}),ta=()=>s.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Settings"}),s.jsx("p",{className:"text-gray-600",children:"Application settings and configuration coming soon..."})]}),sa=({tableName:t,displayName:e,fields:r,onClose:a})=>{const{user:n}=_e(),[i,o]=p.useState([]),[l,d]=p.useState(!0),[u,x]=p.useState(null),[y,f]=p.useState({}),[h,b]=p.useState(!1),j=async()=>{try{d(!0);const{data:g,error:w}=await O.from(t).select("*").order("created_at",{ascending:!1});if(w)throw w;o(g||[])}catch(g){console.error(`Error loading ${e}:`,g)}finally{d(!1)}};p.useEffect(()=>{j()},[t]);const m=g=>{const w={};r.forEach(R=>{w[R.name]=(g==null?void 0:g[R.name])||""}),f(w)},_=async g=>{g.preventDefault();try{if(u){const{error:w}=await O.from(t).update(y).eq("id",u.id);if(w)throw w}else{const{error:w}=await O.from(t).insert([y]);if(w)throw w}x(null),b(!1),m(),j()}catch(w){console.error(`Error saving ${e}:`,w)}},v=async g=>{if(confirm("Are you sure you want to delete this item?"))try{const{error:w}=await O.from(t).delete().eq("id",g);if(w)throw w;j()}catch(w){console.error(`Error deleting ${e}:`,w)}},N=g=>{x(g),m(g),b(!0)},C=()=>{x(null),m(),b(!0)},P=g=>{var R;const w=y[g.name]||"";switch(g.type){case"textarea":return s.jsx("textarea",{name:g.name,value:w,onChange:S=>f({...y,[g.name]:S.target.value}),className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:3,required:g.required},g.name);case"select":return s.jsxs("select",{name:g.name,value:w,onChange:S=>f({...y,[g.name]:S.target.value}),className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:g.required,children:[s.jsxs("option",{value:"",children:["Select ",g.label]}),(R=g.options)==null?void 0:R.map(S=>s.jsx("option",{value:S.value,children:S.label},S.value))]},g.name);case"boolean":return s.jsx("input",{type:"checkbox",name:g.name,checked:w,onChange:S=>f({...y,[g.name]:S.target.checked}),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},g.name);case"number":return s.jsx("input",{type:"number",name:g.name,value:w,onChange:S=>f({...y,[g.name]:S.target.value}),className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:g.required},g.name);default:return s.jsx("input",{type:"text",name:g.name,value:w,onChange:S=>f({...y,[g.name]:S.target.value}),className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:g.required},g.name)}};return n?s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 max-w-4xl mx-auto",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsxs("h2",{className:"text-2xl font-bold text-gray-900",children:[e," Management"]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:C,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:"Add New"}),s.jsx("button",{onClick:a,className:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500",children:"Close"})]})]}),h&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[s.jsx("h3",{className:"text-lg font-semibold mb-4",children:u?`Edit ${e}`:`Add New ${e}`}),s.jsxs("form",{onSubmit:_,className:"space-y-4",children:[r.map(g=>s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[g.label,g.required&&s.jsx("span",{className:"text-red-500",children:"*"})]}),P(g)]},g.name)),s.jsxs("div",{className:"flex gap-2 pt-4",children:[s.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:u?"Update":"Create"}),s.jsx("button",{type:"button",onClick:()=>b(!1),className:"flex-1 px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500",children:"Cancel"})]})]})]})}),s.jsx("div",{className:"overflow-x-auto",children:l?s.jsx("div",{className:"text-center py-8",children:"Loading..."}):s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[r.map(g=>s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:g.label},g.name)),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i.map(g=>s.jsxs("tr",{className:"hover:bg-gray-50",children:[r.map(w=>s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:w.type==="boolean"?g[w.name]?"Yes":"No":g[w.name]||"-"},w.name)),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[s.jsx("button",{onClick:()=>N(g),className:"text-blue-600 hover:text-blue-900 mr-3",children:"Edit"}),s.jsx("button",{onClick:()=>v(g.id),className:"text-red-600 hover:text-red-900",children:"Delete"})]})]},g.id))})]})}),i.length===0&&!l&&s.jsxs("div",{className:"text-center py-8 text-gray-500",children:["No ",e.toLowerCase(),' found. Click "Add New" to create one.']})]}):s.jsx("div",{className:"p-4",children:"Please log in to manage reference tables."})},ra=()=>{const[t,e]=p.useState(null),r=[{id:"user_roles_ref",name:"User Roles",fields:[{name:"role_name",label:"Role Name",type:"text",required:!0},{name:"description",label:"Description",type:"textarea"},{name:"permissions",label:"Permissions (JSON)",type:"textarea",required:!0},{name:"is_active",label:"Active",type:"boolean"}]},{id:"facility_types_ref",name:"Facility Types",fields:[{name:"type_name",label:"Type Name",type:"text",required:!0},{name:"description",label:"Description",type:"textarea"},{name:"is_active",label:"Active",type:"boolean"}]},{id:"sex_ref",name:"Sex/Gender",fields:[{name:"sex_name",label:"Sex Name",type:"text",required:!0},{name:"description",label:"Description",type:"textarea"},{name:"is_active",label:"Active",type:"boolean"}]},{id:"diabetes_types_ref",name:"Diabetes Types",fields:[{name:"type_name",label:"Type Name",type:"text",required:!0},{name:"description",label:"Description",type:"textarea"},{name:"is_active",label:"Active",type:"boolean"}]},{id:"smoking_status_ref",name:"Smoking Status",fields:[{name:"status_name",label:"Status Name",type:"text",required:!0},{name:"description",label:"Description",type:"textarea"},{name:"is_active",label:"Active",type:"boolean"}]},{id:"alcohol_consumption_ref",name:"Alcohol Consumption",fields:[{name:"consumption_level",label:"Consumption Level",type:"text",required:!0},{name:"description",label:"Description",type:"textarea"},{name:"is_active",label:"Active",type:"boolean"}]},{id:"ulcer_types_ref",name:"Ulcer Types",fields:[{name:"type_name",label:"Type Name",type:"text",required:!0},{name:"description",label:"Description",type:"textarea"},{name:"whasa_category",label:"WHASA Category",type:"text"},{name:"is_active",label:"Active",type:"boolean"}]},{id:"wound_locations_ref",name:"Wound Locations",fields:[{name:"location_name",label:"Location Name",type:"text",required:!0},{name:"body_region",label:"Body Region",type:"select",options:[{value:"upper_limb",label:"Upper Limb"},{value:"lower_limb",label:"Lower Limb"},{value:"trunk",label:"Trunk"},{value:"head_neck",label:"Head/Neck"},{value:"other",label:"Other"}]},{name:"description",label:"Description",type:"textarea"},{name:"is_active",label:"Active",type:"boolean"}]},{id:"healability_status_ref",name:"Healability Status",fields:[{name:"status_name",label:"Status Name",type:"text",required:!0},{name:"description",label:"Description",type:"textarea"},{name:"clinical_criteria",label:"Clinical Criteria",type:"textarea"},{name:"is_active",label:"Active",type:"boolean"}]},{id:"compression_recommendations_ref",name:"Compression Recommendations",fields:[{name:"recommendation_name",label:"Recommendation Name",type:"text",required:!0},{name:"abpi_min",label:"ABPI Min",type:"number"},{name:"abpi_max",label:"ABPI Max",type:"number"},{name:"description",label:"Description",type:"textarea"},{name:"clinical_rationale",label:"Clinical Rationale",type:"textarea"},{name:"is_active",label:"Active",type:"boolean"}]},{id:"time_tissue_types_options",name:"T.I.M.E. Tissue Types",fields:[{name:"tissue_name",label:"Tissue Name",type:"text",required:!0},{name:"tissue_category",label:"Tissue Category",type:"select",options:[{value:"viable",label:"Viable"},{value:"non_viable",label:"Non-viable"},{value:"mixed",label:"Mixed"}]},{name:"description",label:"Description",type:"textarea"},{name:"clinical_implications",label:"Clinical Implications",type:"textarea"},{name:"is_active",label:"Active",type:"boolean"}]},{id:"infection_indicators_options",name:"Infection Indicators",fields:[{name:"indicator_name",label:"Indicator Name",type:"text",required:!0},{name:"category",label:"Category",type:"select",options:[{value:"nerds",label:"NERDS"},{value:"stones",label:"STONES"},{value:"systemic",label:"Systemic"}]},{name:"description",label:"Description",type:"textarea"},{name:"clinical_significance",label:"Clinical Significance",type:"textarea"},{name:"is_active",label:"Active",type:"boolean"}]},{id:"moisture_levels_options",name:"Moisture Levels",fields:[{name:"level_name",label:"Level Name",type:"text",required:!0},{name:"description",label:"Description",type:"textarea"},{name:"clinical_implications",label:"Clinical Implications",type:"textarea"},{name:"is_active",label:"Active",type:"boolean"}]},{id:"care_plan_status_ref",name:"Care Plan Status",fields:[{name:"status_name",label:"Status Name",type:"text",required:!0},{name:"description",label:"Description",type:"textarea"},{name:"is_active",label:"Active",type:"boolean"}]},{id:"treatment_objective_types_ref",name:"Treatment Objectives",fields:[{name:"objective_name",label:"Objective Name",type:"text",required:!0},{name:"description",label:"Description",type:"textarea"},{name:"category",label:"Category",type:"select",options:[{value:"healing",label:"Healing"},{value:"maintenance",label:"Maintenance"},{value:"palliative",label:"Palliative"}]},{name:"is_active",label:"Active",type:"boolean"}]},{id:"product_categories_ref",name:"Product Categories",fields:[{name:"category_name",label:"Category Name",type:"text",required:!0},{name:"description",label:"Description",type:"textarea"},{name:"is_active",label:"Active",type:"boolean"}]},{id:"product_types_ref",name:"Product Types",fields:[{name:"type_name",label:"Type Name",type:"text",required:!0},{name:"description",label:"Description",type:"textarea"},{name:"is_active",label:"Active",type:"boolean"}]}],a=o=>{e(o)},n=()=>{e(null)},i=r.find(o=>o.id===t);return s.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:s.jsxs("div",{className:"max-w-7xl mx-auto",children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Reference Tables Management"}),s.jsx("p",{className:"mt-2 text-gray-600",children:"Manage system reference tables and lookup values"})]}),t?s.jsx(sa,{tableName:i.id,displayName:i.name,fields:i.fields,onClose:n}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.map(o=>s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>a(o.id),children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:o.name}),s.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:[o.fields.length," fields"]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("span",{className:"text-xs text-gray-500",children:["Table: ",o.id]}),s.jsx("button",{className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"Manage →"})]})]},o.id))})]})})},aa=()=>{const{isAdmin:t}=_e(),[e,r]=p.useState([]),[a,n]=p.useState([]),[i,o]=p.useState(!0),[l,d]=p.useState(null),[u,x]=p.useState(!1);p.useEffect(()=>{if(!t()){E.error("Access denied. Admin privileges required.");return}y(),f()},[t]);const y=async()=>{try{const{data:m,error:_}=await O.from("users").select(`
          id,
          username,
          email,
          first_name,
          last_name,
          professional_registration,
          is_active,
          created_at,
          user_roles (
            role_id,
            assigned_at,
            user_roles_ref (
              role_name,
              description
            )
          )
        `).order("created_at",{ascending:!1});if(_){console.error("Error loading users:",_),E.error("Failed to load users");return}const v=(m==null?void 0:m.map(N=>{var C;return{...N,roles:((C=N.user_roles)==null?void 0:C.map(P=>({role_id:P.role_id,role_name:P.user_roles_ref.role_name,description:P.user_roles_ref.description,assigned_at:P.assigned_at})))||[]}}))||[];r(v)}catch(m){console.error("Error loading users:",m),E.error("Failed to load users")}finally{o(!1)}},f=async()=>{try{const{data:m,error:_}=await O.from("user_roles_ref").select("*").eq("is_active",!0).order("role_name");if(_){console.error("Error loading roles:",_);return}n(m||[])}catch(m){console.error("Error loading roles:",m)}},h=async(m,_)=>{var v;try{const{error:N}=await O.from("user_roles").insert({user_id:m,role_id:_,assigned_by:(v=(await O.auth.getUser()).data.user)==null?void 0:v.id});if(N){console.error("Error assigning role:",N),E.error("Failed to assign role");return}E.success("Role assigned successfully"),y()}catch(N){console.error("Error assigning role:",N),E.error("Failed to assign role")}},b=async(m,_)=>{try{const{error:v}=await O.from("user_roles").delete().eq("user_id",m).eq("role_id",_);if(v){console.error("Error removing role:",v),E.error("Failed to remove role");return}E.success("Role removed successfully"),y()}catch(v){console.error("Error removing role:",v),E.error("Failed to remove role")}},j=async(m,_)=>{try{const{error:v}=await O.from("users").update({is_active:!_}).eq("id",m);if(v){console.error("Error updating user status:",v),E.error("Failed to update user status");return}E.success(`User ${_?"deactivated":"activated"} successfully`),y()}catch(v){console.error("Error updating user status:",v),E.error("Failed to update user status")}};return t()?i?s.jsx("div",{className:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8",children:s.jsx("div",{className:"px-4 py-6 sm:px-0",children:s.jsx("div",{className:"flex justify-center",children:s.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})})})}):s.jsx("div",{className:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"px-4 py-6 sm:px-0",children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"User Management"}),s.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Manage user accounts and role assignments"})]}),s.jsx("div",{className:"bg-white shadow overflow-hidden sm:rounded-md",children:s.jsx("ul",{className:"divide-y divide-gray-200",children:e.map(m=>{var _,v;return s.jsx("li",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:s.jsx("div",{className:"h-10 w-10 rounded-full bg-blue-600 flex items-center justify-center",children:s.jsx("span",{className:"text-white font-medium",children:((_=m.first_name)==null?void 0:_[0])||((v=m.username)==null?void 0:v[0])||"U"})})}),s.jsxs("div",{className:"ml-4",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[m.first_name," ",m.last_name]}),s.jsx("span",{className:`ml-2 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${m.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:m.is_active?"Active":"Inactive"})]}),s.jsx("p",{className:"text-sm text-gray-500",children:m.email}),m.professional_registration&&s.jsxs("p",{className:"text-xs text-gray-400",children:["Reg: ",m.professional_registration]})]})]}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"flex flex-wrap gap-1",children:m.roles.map((N,C)=>s.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[N.role_name,s.jsx("button",{onClick:()=>b(m.id,N.role_id),className:"ml-1 text-blue-600 hover:text-blue-800",children:"×"})]},C))}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("button",{onClick:()=>{d(m),x(!0)},className:"inline-flex items-center px-3 py-1 border border-transparent text-xs font-medium rounded-md text-blue-700 bg-blue-100 hover:bg-blue-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Assign Role"}),s.jsx("button",{onClick:()=>j(m.id,m.is_active),className:`inline-flex items-center px-3 py-1 border border-transparent text-xs font-medium rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 ${m.is_active?"text-red-700 bg-red-100 hover:bg-red-200 focus:ring-red-500":"text-green-700 bg-green-100 hover:bg-green-200 focus:ring-green-500"}`,children:m.is_active?"Deactivate":"Activate"})]})]})]})},m.id)})})}),u&&l&&s.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:s.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:s.jsxs("div",{className:"mt-3",children:[s.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:["Assign Role to ",l.first_name," ",l.last_name]}),s.jsx("div",{className:"space-y-3",children:a.map(m=>s.jsxs("button",{onClick:()=>{h(l.id,m.id),x(!1)},className:"w-full text-left p-3 border border-gray-200 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[s.jsx("div",{className:"font-medium text-gray-900",children:m.role_name}),s.jsx("div",{className:"text-sm text-gray-500",children:m.description})]},m.id))}),s.jsx("div",{className:"mt-6 flex justify-end",children:s.jsx("button",{onClick:()=>x(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 border border-gray-300 rounded-md hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500",children:"Cancel"})})]})})})]})}):s.jsx("div",{className:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8",children:s.jsx("div",{className:"px-4 py-6 sm:px-0",children:s.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:s.jsxs("div",{className:"flex",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),s.jsxs("div",{className:"ml-3",children:[s.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Access Denied"}),s.jsx("div",{className:"mt-2 text-sm text-red-700",children:s.jsx("p",{children:"You do not have permission to access this page. Administrator privileges are required."})})]})]})})})})},na=ne.lazy(()=>nt(()=>import("./BookingSystem-CLf-3pvV.js"),__vite__mapDeps([0,1,2,3]))),Se=ne.lazy(()=>nt(()=>import("./ProtectedRoute-CYTpqFjj.js"),__vite__mapDeps([4,2,1,3]))),ia=ne.lazy(()=>nt(()=>import("./BasicProtectedRoute-Dfvfax-k.js"),__vite__mapDeps([5,2,1,3])));function oa(){return s.jsx(Dt,{FallbackComponent:Gt,children:s.jsx(Vt,{children:s.jsx(Kt,{children:s.jsx("div",{className:"app",children:s.jsx(p.Suspense,{fallback:s.jsx(zr,{}),children:s.jsxs(ts,{children:[s.jsx(L,{path:"/login",element:s.jsx(Br,{})}),s.jsx(L,{path:"/register",element:s.jsx(Wr,{})}),s.jsx(L,{path:"/test",element:s.jsx(Vr,{})}),s.jsxs(L,{path:"/",element:s.jsx(ia,{children:s.jsx(Kr,{})}),children:[s.jsx(L,{index:!0,element:s.jsx(dt,{to:"/dashboard",replace:!0})}),s.jsx(L,{path:"dashboard",element:s.jsx(Gr,{})}),s.jsx(L,{path:"patients",element:s.jsx(Jr,{})}),s.jsx(L,{path:"patients/new",element:s.jsx(Yr,{})}),s.jsx(L,{path:"booking",element:s.jsx(na,{})}),s.jsx(L,{path:"patients/:patientId/assessment",element:s.jsx(Se,{requiredRole:"wound_specialist_nurse",fallbackPath:"/dashboard",children:s.jsx(Zr,{})})}),s.jsx(L,{path:"patients/:patientId/care-plan",element:s.jsx(Se,{requiredRole:"wound_specialist_nurse",fallbackPath:"/dashboard",children:s.jsx(Xr,{})})}),s.jsx(L,{path:"patients/:patientId/therapy",element:s.jsx(Se,{requiredRole:"wound_specialist_nurse",fallbackPath:"/dashboard",children:s.jsx(ea,{})})}),s.jsx(L,{path:"settings",element:s.jsx(ta,{})}),s.jsx(L,{path:"admin/reference-tables",element:s.jsx(Se,{requiredRole:"administrator",fallbackPath:"/dashboard",children:s.jsx(ra,{})})}),s.jsx(L,{path:"admin/user-management",element:s.jsx(Se,{requiredRole:"administrator",fallbackPath:"/dashboard",children:s.jsx(aa,{})})})]}),s.jsx(L,{path:"*",element:s.jsx(dt,{to:"/dashboard",replace:!0})})]})})})})})})}const la=new Os({defaultOptions:{queries:{staleTime:1e3*60*5,gcTime:1e3*60*10,retry:(t,e)=>(e==null?void 0:e.status)>=400&&(e==null?void 0:e.status)<500?!1:t<3,refetchOnWindowFocus:!1}}});Xe.createRoot(document.getElementById("root")).render(s.jsx(ne.StrictMode,{children:s.jsx(Dt,{FallbackComponent:Gt,children:s.jsx(Gs,{children:s.jsx(Ts,{client:la,children:s.jsx(ss,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:s.jsx(Vt,{children:s.jsxs(Kt,{children:[s.jsx(oa,{}),s.jsx(Ir,{position:"top-right",toastOptions:{duration:4e3,style:{background:"#363636",color:"#fff"},success:{duration:3e3,iconTheme:{primary:"#4ade80",secondary:"#fff"}},error:{duration:5e3,iconTheme:{primary:"#ef4444",secondary:"#fff"}}}})]})})})})})})}));export{zr as L,E as c,s as j,O as s,_e as u};
//# sourceMappingURL=index-C1SobZH1.js.map
